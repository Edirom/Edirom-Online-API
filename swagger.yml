openapi: 3.0.1
info:
  title: Edirom-Online Backend API
  description: This is the description and documentation of the Edirom-Online backend
    API.
  license:
    name: MIT
  version: 1.0.0
servers:
- url: http://localhost:8080/exist/apps/Edirom-Online-Backend
  description: Local backend
- url: https://klarinettenquintett.weber-gesamtausgabe.de/
  description: Klarinettenquintett
- url: https://edition.freischuetz-digital.de
  description: Freisch√ºtz Digital
- url: https://open-faust.zenmem.de
  description: Open Faust
paths:

  # getAnnotation.xql
  /data/xql/getAnnotation.xql:
    get:
      tags:
      - Annotations
      summary: Get annotation
      description: Returns HTML for annotation
      operationId: getAnnotation
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: uri
        in: query
        description: URI
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml#annotation-2
      - name: target
        in: query
        description: Target
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: tip
      - name: lang
        in: query
        description: Language
        schema:
          type: string
          enum:
          - de
          - en        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: de
      responses:
        "200":
          description: Successful operation
          content: {}

  # getAnnotations.xql
  /data/xql/getAnnotations.xql:
    get:
      tags:
      - Annotations
      summary: Get annotations
      description: Returns JSON for annotations
      operationId: getAnnotations
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: uri
        in: query
        description: URI
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Annotations'

  # getAnnotationInfos.xql
  /data/xql/getAnnotationInfos.xql:
    get:
      tags:
      - Annotations
      summary: Get annotation infos
      description: Returns JSON for annotation infos
      operationId: getAnnotationInfos
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string        
        examples:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: uri
        in: query
        description: URI
        schema:
          type: string        
        examples:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-1.xml
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnnotationInfos'

  # getAnnotationMeta.xql
  /data/xql/getAnnotationMeta.xql:
    get:
      tags:
      - Annotations
      summary: Get annotation metadata
      description: Returns HTML for annotation metadata
      operationId: getAnnotationMeta
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string        
        examples:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: uri
        in: query
        description: URI
        schema:
          type: string        
        examples:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml#annotation-2
      - name: lang
        in: query
        description: Language
        schema:
          type: string
          enum:
          - de
          - en        
        examples:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: de
      responses:
        "200":
          description: Successful operation
          content:
            text/html:
              schema:
                type: string

  # getAnnotationText.xql
  /data/xql/getAnnotationText.xql:
    get:
      tags:
      - Annotations
      summary: Get annotation text
      description: Returns HTML for annotation text
      operationId: getAnnotationText
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: uri
        in: query
        description: URI
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml#annotation-8
      - name: lang
        in: query
        description: Language
        schema:
          type: string
          default: en
          enum:
          - de
          - en        
        examples:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: de
      responses:
        "200":
          description: Successful operation
          content: 
            text/html:
              schema:
                type: string
  
  # getAnnotationsInText.xql
  # https://open-faust.zenmem.de
  # /data/xql/getAnnotationsInText.xql?_dc=1749634993542&
  # xmldb%3Aexist%3A%2F%2F%2Fdb%2Fapps%2Fedirom%2Fopen-faust%2Fcontent%2Fedition%2Fedition_text.xml
  # xmldb%3Aexist%3A%2F%2F%2Fdb%2Fapps%2Fedirom%2Fopen-faust%2Fcontent%2F
  # lang=en
  /data/xql/getAnnotationsInText.xql:
    get:
      tags:
      - Annotations
      summary: Get annotations in text
      description: Returns JSON for annotations in text
      operationId: getAnnotationsInText
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string        
        examples: 
          OpenFaust:
            summary: "Open Faust"
            value: xmldb:exist:///db/apps/edirom/open-faust/content/edition-open-faust.xml
      - name: uri
        in: query
        description: URI
        schema:
          type: string        
        examples: 
          OpenFaust:
            summary: "Open Faust"
            value: xmldb:exist:///db/apps/edirom/open-faust/content/edition/edition_text.xml
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: string

  # getAnnotationsOnPage.xql
  /data/xql/getAnnotationsOnPage.xql:
    get:
      tags:
      - Annotations
      summary: Get annotations on page
      description: Returns JSON for annotations on page
      operationId: getAnnotationsOnPage
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string        
        examples:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: uri
        in: query
        description: URI
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-1.xml
      - name: pageId
        in: query
        description: Page ID
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: facsimile-2001002
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AnnotationItem'

  # getAnnotationOpenAllUris.xql
  /data/xql/getAnnotationOpenAllUris.xql:
    get:
      tags:
      - Annotations
      summary: Get all annotation URIs
      description: Opens all annotation URIs
      operationId: getAnnotationOpenAllUris
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml
      - name: annotId
        in: query
        description: Annotation ID
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: annotation-9
      responses:
        "200":
          description: Successful operation
          content:
            text/plain:
              schema:
                type: string

  # getAnnotationPreviews.xql
  /data/xql/getAnnotationPreviews.xql:
    get:
      tags:
      - Annotations
      summary: Get annotation previews
      description: Returns JSON for annotation previews
      operationId: getAnnotationPreviews
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: uri
        in: query
        description: URI
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml#annotation-8
      - name: lang
        in: query
        description: Language
        schema:
          type: string
          enum:
          - de
          - en        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: de
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnnotationPreviews'

  /data/xql/getAudioPlayer.xql:
    get:
      tags:
      - Audio
      summary: Get audio player
      description: Returns HTML for audio player
      operationId: getAudioPlayer
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string        
        examples: 
          Freisch√ºtz:
            summary: "Freisch√ºtz"
            value: xmldb:exist:///db/apps/contents/audioSources/freidi-recording_Janowski1994.xml
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      responses:
        "200":
          description: Successful operation
          content: 
            text/html:
              schema:
                type: string

  # getEdition.xql
  /data/xql/getEdition.xql:
    get:
      tags:
      - Edition
      summary: Get edition
      description: Returns JSON for edition
      operationId: getEdition
      parameters:
      - name: id
        in: query
        description: ID
        schema:
          type: string        
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: xmldb:exist:///db/apps/edirom/edition-example/content/ediromEditions/edirom_edition_example.xml
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Edition'

  # getEditions.xql
  /data/xql/getEditions.xql:
    get:
      tags:
      - Edition
      summary: Get editions
      description: Returns JSON for editions
      operationId: getEditions
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Edition'
              examples:
                EditionExample:
                  summary: "EditionExample"
                  value: 
                    - additional_css_path: ""
                      id: "edirom_edition_example"
                      languages: "de"
                      name: "Edirom Edition Example"
                      doc: "xmldb:exist:///db/apps/edirom/edition-example/content/ediromEditions/edirom_edition_example.xml"

  # getEditionURI
  /data/xql/getEditionURI.xql:
    get:
      tags:
      - Edition
      summary: Get edition URI
      description: Returns JSON for edition URI
      operationId: getEditionURI
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: edirom_edition_examplexmldb:exist:///db/contents/edition-50127042.xml
      responses:
        "200":
          description: Successful operation
          content:
            text/plain:
              schema:
                type: string
              examples:
                EditionExample:
                  summary: "EditionExample"
                  value: xmldb:exist:///db/apps/edirom/edition-example/content/ediromEditions/edirom_edition_example.xml
  
  # getMeasure.xql
  /data/xql/getMeasure.xql:
    get:
      tags:
      - Measure
      summary: Get measure
      description: Returns JSON for measure
      operationId: getMeasure
      parameters:
      - name: id
        in: query
        description: ID
        schema:
          type: string        
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-1.xml
      - name: measureId
        in: query
        description: Measure ID
        schema:
          type: string        
        examples:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: bar-20016?tstamp2=2m+0
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: string

  # getMeasures.xql
  /data/xql/getMeasures.xql:
    get:
      tags:
      - Measure
      summary: Get measures
      description: Returns JSON for measures
      operationId: getMeasures
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-3.xml
      - name: mdiv
        in: query
        description: Measure div
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: x84707a44-0e6a-4c77-9eab-d196150079a9
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: string

  # getMeasurePage.xql
  /data/xql/getMeasurePage.xql:
    get:
      tags:
      - Measure
      summary: Get measure page
      description: Returns JSON for measure page
      operationId: getMeasurePage
      parameters:
      - name: id
        in: query
        description: ID
        schema:
          type: string      
        examples:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml
      - name: measure
        in: query
        description: Measure
        schema:
          type: number
          format: integer  
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 3
      - name: movementId
        in: query
        description: Movement ID
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: tf280fcd0-c18e-42b4-8ec3-8166ac51f7cf
      - name: measureCount
        in: query
        required: false
        description: Measure Count
        schema:
          type: number      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 2
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: string

  # getMeasuresOnPage.xql
  /data/xql/getMeasuresOnPage.xql:
    get:
      tags:
      - Measure
      summary: Get measures on page
      description: Returns JSON for measures on page
      operationId: getMeasuresOnPage
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-1.xml
      - name: pageId
        in: query
        description: Page ID
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: facsimile-2001002
      responses:
        "200":
          description: Successful operation
          content:
            application/xml:
              schema:
                type: string

  # getMovements.xql
  /data/xql/getMovements.xql:
    get:
      tags:
      - Movements
      summary: Get movements
      description: Returns JSON for movements
      operationId: getMovements
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml
          EditionExample:
            summary: "EditionExample"
            value: xmldb:exist:///db/apps/edirom/edition-example/content/sources/edirom_source_47dde5ab-b8ff-4004-bfde-b65ea5a9a15e.xml
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Movement'

  # getMovementsFirstPage.xql
  /data/xql/getMovementsFirstPage.xql:
    get:
      tags:
      - Movements
      summary: Get movements first page
      description: Returns JSON for movements first page
      operationId: getMovementsFirstPage
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-1.xml
      - name: movementId
        in: query
        description: Movement ID
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: part-3
      responses:
        "200":
          description: Successful operation
          content:
            text/plain:
              schema:
                type: string

  # getOverlays.xql
  # [empty result - there may be better example]
  /data/xql/getOverlays.xql:
    get:
      tags:
      - Overlay
      summary: Get overlays
      description: Returns JSON for overlays
      operationId: getOverlays
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/edirom/edition-example/content/sources/edirom_source_47dde5ab-b8ff-4004-bfde-b65ea5a9a15e.xml
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: string

  # getOverlayOnPage.xql
  /data/xql/getOverlayOnPage.xql:
    get:
      tags:
      - Overlay
      summary: Get overlay on page
      description: Returns JSON for overlay on page
      operationId: OverlayOnPage
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-3.xml
      - name: pageId
        in: query
        description: Page ID
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: facsimile-2002001
      - name: overlayId
        in: query
        description: Overlay ID
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: layer-1
      responses:
        "200":
          description: Successful operation
          content:
            application/svg+xml:
              schema:
                type: string

  # getWorkID
  /data/xql/getWorkID.xql:
    get:
      tags:
      - Work
      summary: Get work ID
      description: Returns work ID
      operationId: getWork
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: xmldb:exist:///db/apps/edirom/edition-example/content/ediromEditions/edirom_edition_example.xml
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: workId
        in: query
        description: Work ID
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: edirom_work_743373fb-4dcf-4329-90c0-fd1eacc9ea69
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: edirom_work_291f7ad8-9bb8-45eb-9186-801dec2f80d9
      responses:
        "200":
          description: Successful operation
          content:
            text/plain:
              schema:
                type: string
              examples:
                EditionExample:
                  summary: "EditionExample"
                  value: edirom_work_291f7ad8-9bb8-45eb-9186-801dec2f80d9

  # getWorks.xql
  /data/xql/getWorks.xql:
    get:
      tags:
      - Work
      summary: Get works
      description: Returns JSON for works
      operationId: getWorks
      parameters:
      - name: editionId
        in: query
        description: Edition ID
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Works'

  # getChapters.xql
  /data/xql/getChapters.xql:
    get:
      tags:
      - Other
      summary: Get chapters
      description: Returns JSON for chapters
      operationId: getChapters
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Freisch√ºtz:
            summary: "Freisch√ºtz"
            value: xmldb:exist:///db/apps/contents/librettoSources/freidi-librettoSource_ED-tx.xml
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/edirom/edition-example/content/startwindow.xml
      - name: mode
        in: query
        description: Mode
        schema:
          type: string      
        examples: 
          Freisch√ºtz:
            summary: "Freisch√ºtz"
            value: pageMode
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Chapters'

  # getConcordances.xql
  /data/xql/getConcordances.xql:
    get:
      tags:
      - Other
      summary: Get concordances
      description: Returns JSON for concordances
      operationId: getConcordances
      parameters:
      - name: id
        in: query
        description: ID
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: workId
        in: query
        description: Work ID
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: edition-27830471_work-1
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Concordance'

  # TODO: getHeader.xql
  # Freisch√ºtz: https://edition.freischuetz-digital.de/data/xql/getHeader.xql?_dc=1749114435866&uri=xmldb%3Aexist%3A%2F%2F%2Fdb%2Fapps%2Fcontents%2Fedition%2Ffreidi-musikgenese.xml&type=text
  /data/xql/getHeader.xql:
    get:
      tags:
      - Other
      summary: Get header
      description: Returns JSON for header
      operationId: getHeader
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Freisch√ºtz:
            summary: "Freisch√ºtz"
            value: xmldb:exist:///db/apps/contents/edition/freidi-musikgenese.xml
      - name: type
        in: query
        description: Type
        schema:
          type: string
          enum:
          - work
          - source
          - recording
          - text      
        examples: 
          Freisch√ºtz:
            summary: "Freisch√ºtz"
            value: text
      - name: lang
        in: query
        description: Language
        schema:
          type: string
          default: en
          enum:
          - de
          - en      
        examples:
          Freisch√ºtz:
            summary: "Freisch√ºtz"
            value: en
      responses:
        "200":
          description: Successful operation
          content: 
            text/html:
              schema:
                type: string

  # getHelp.xql
  /data/xql/getHelp.xql:
    get:
      tags:
      - Other
      summary: Get help
      description: Returns HTML for help
      operationId: getHelp
      parameters:
      - name: idPrefix
        in: query
        description: ID prefix
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: helpWindow-1073
      - name: lang
        in: query
        description: Language
        schema:
          type: string
          enum:
          - de
          - en      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: en
      responses:
        "200":
          description: Successful operation
          content: {}

  # getiFrameURL.xql
  /data/xql/getiFrameURL.xql:
    get:
      tags:
      - Other
      summary: Get iframe URL
      description: Returns iframe URL
      operationId: getiFrameURL
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/texts/text-7.xml
      responses:
        "200":
          description: Successful operation
          content:
            text/plain:
              schema:
                type: string

  # getInternalIdType.xql
  /data/xql/getInternalIdType.xql:
    get:
      tags:
      - Other
      summary: Get internalIdType
      description: Returns internalIdType
      operationId: getInternalIdType
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml
      responses:
        "200":
          description: Successful operation
          content:
            text/plain:
              schema:
                type: string

  # getLanguageFile.xql
  /data/xql/getLanguageFile.xql:
    get:
      tags:
      - Other
      summary: Get language file
      description: Returns XML for language file
      operationId: getLanguageFile
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: xmldb:exist:///db/apps/edirom/edition-example/content/ediromEditions/edirom_edition_example.xml
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: mode
        in: query
        description: Mode
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: xml
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: json
      - name: lang
        in: query
        description: Language
        schema:
          type: string
          enum:
          - de
          - en      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: de
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: en
      responses:
        "200":
          description: Successful operation
          content:
            application/xml:
              schema:
                type: string
            application/json:
              schema:
                type: string


  # getLinkTarget.xql
  /data/xql/getLinkTarget.xql:
    post:
      tags:
      - Other
      summary: Get link target
      description: Returns JSON for link target
      operationId: getLinkTarget
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml
      - name: lang
        in: query
        description: Language
        schema:
          type: string
          enum:
          - de
          - en      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: de
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkTarget'

  # getMusicInMdiv.xql
  /data/xql/getMusicInMdiv.xql:
    get:
      tags:
      - Other
      summary: Get music in mdiv
      description: Returns XML for music in mdiv
      operationId: getMusicInMdiv
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: xmldb:exist:///db/apps/edirom/edition-example/content/editions/edirom_edition_7bade454-c1b2-499f-8100-7b3e369e2d65.xml
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml
      - name: movementId
        in: query
        required: false
        description: Movement ID
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      responses:
        "200":
          description: Successful operation
          content: {}

  # getNavigatorConfig.xql
  /data/xql/getNavigatorConfig.xql:
    get:
      tags:
      - Other
      summary: Get navigator config
      description: Returns HTML for navigator config
      operationId: getNavigatorConfig
      parameters:
      - name: editionId
        in: query
        description: Edition ID
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: xmldb:exist:///db/apps/edirom/edition-example/content/ediromEditions/edirom_edition_example.xml
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: workId
        in: query
        description: Work ID
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: edirom_work_291f7ad8-9bb8-45eb-9186-801dec2f80d9
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: edition-27830471_work-1
      - name: lang
        in: query
        description: Language
        schema:
          type: string
          enum:
          - de
          - en      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: de
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: en
      responses:
        "200":
          description: Successful operation
          content: 
            text/html:
              schema:
                type: string

  # getPages.xql
  /data/xql/getPages.xql:
    get:
      tags:
      - Other
      summary: Get pages
      description: Returns JSON for pages
      operationId: getPages
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/edirom/edition-example/content/sources/edirom_source_2b2b26e5-c85d-4edd-8806-fe126ce390a2.xml
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Page'

  # getParts.xql
  /data/xql/getParts.xql:
    get:
      tags:
      - Other
      summary: Get parts
      description: Returns JSON for parts
      operationId: getParts
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-5.xml
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: string

  # getPreferences.xql
  /data/xql/getPreferences.xql:
    get:
      tags:
      - Other
      summary: Get preferences
      description: Returns XML for preferences
      operationId: getPreferences
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: xmldb:exist:///db/apps/edirom/edition-example/content/ediromEditions/edirom_edition_example.xml
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: mode
        in: query
        description: Mode
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: xml
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: json
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Preferences'
            application/xml:
              schema:
                type: string
            

  # TODO: getReducedDocument.xql
  /data/xql/getReducedDocument.xql:
    get:
      tags:
      - Other
      summary: Get reduced document
      description: Returns HTML for reduced document
      operationId: getReducedDocument
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      - name: selectionId
        in: query
        description: Selection ID
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      - name: subtreeRoot
        in: query
        description: Subtree root
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      - name: idPrefix
        in: query
        description: ID prefix
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      responses:
        "200":
          description: Successful operation
          content:
            text/html:
              schema:
                type: string

  # TODO: getSummary.xql
  /data/xql/getSummary.xql:
    get:
      tags:
      - Other
      summary: Get summary
      description: Returns HTML for summary
      operationId: getSummary
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      - name: type
        in: query
        description: Type
        schema:
          type: string
          enum:
          - work
          - source
          - recording
          - text      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      responses:
        "200":
          description: Successful operation
          content:
            text/html:
              schema:
                type: string

  # getText.xql
  # [returns empty <div> - there may be better example] 
  /data/xql/getText.xql:
    get:
      tags:
      - Other
      summary: Get text
      description: Returns HTML for text
      operationId: getText
      parameters:
      - name: edition
        in: query
        description: Identifier of the edition
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: xmldb:exist:///db/apps/edirom/edition-example/content/ediromEditions/edirom_edition_example.xml
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
      - name: idPrefix
        in: query
        description: ID prefix
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value: textView-1063_
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: textView-1063_
      - name: term
        in: query
        description: Term
        required: false
        schema:
          type: string      
        examples:
          EditionExample:
            summary: "EditionExample"
            value: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      - name: path
        in: query
        description: Path
        required: false
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      - name: page
        in: query
        description: Page
        required: false
        schema:
          type: string      
        examples: 
          EditionExample:
            summary: "EditionExample"
            value:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: 
      responses:
        "200":
          description: Successful operation
          content: 
            text/html:
              schema:
                type: string
  
  # getXml.xql
  /data/xql/getXml.xql:
    get:
      tags:
      - Other
      summary: Get xml
      description: Returns XML
      operationId: getXml
      parameters:
      - name: uri
        in: query
        description: URI
        schema:
          type: string      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml
      - name: lang
        in: query
        description: Language
        schema:
          type: string
          enum:
          - de
          - en      
        examples: 
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: de
      responses:
        "200":
          description: Successful operation
          content:
            text/xml:
              schema:
                type: string

  #getZone.xql
  /data/xql/getZone.xql:
    get:
      tags:
      - Other
      summary: Get a zone by ID
      description: Returns a single zone element (typically from a facsimile or measure region) as JSON.
      operationId: getZone 
      parameters:
      - name: uri
        in: query
        description: Full xmldb URI of the source MEI file containing the zone
        required: true
        schema:
          type: string
        examples:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-8.xml
          EditionExample:
            summary: "EditionExample"
            value: xmldb:exist:///db/apps/edirom/edition-example/content/sources/edirom_source_2b2b26e5-c85d-4edd-8806-fe126ce390a2.xml
      - name: zoneId  
        in: query
        description: The xml:id of the zone element to retrieve
        required: true
        schema:
          type: string
        examples:
          Klarinettenquintett:
            summary: "Klarinettenquintett"
            value: zone_4d395284-88a3-4269-adc8-8ecabc1d434d
          EditionExample:
            summary: "EditionExample"
            value: edirom_zone_ea3b955b-86c2-4cac-9dde-4874bc5b7422

      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  ulx:
                    type: integer
                  uly:
                    type: integer
                  lrx:
                    type: integer
                  lry:
                    type: integer
                  type:
                    type: string
  
  # search.xql
  /data/xql/search.xql:
    get:
      tags:
        - Search
      summary: Search in edition
      description: Returns HTML with search results for a given term in the specified edition and language.
      operationId: search
      parameters:
        - name: edition
          in: query
          description: Identifier of the edition (XMLDB URI)
          required: true
          schema:
            type: string
          examples:
            Klarinettenquintett:
              summary: "Klarinettenquintett"
              value: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/edition.xml
        - name: term
          in: query
          description: Search term
          required: true
          schema:
            type: string
          examples:
            Klarinettenquintett:
              summary: "Klarinettenquintett"
              value: neu
        - name: lang
          in: query
          description: Language for result messages
          required: false
          schema:
            type: string
            default: en
            enum:
              - de
              - en
          examples:
            Klarinettenquintett:
              summary: "Klarinettenquintett"
              value: de
      responses:
        "200":
          description: Successful operation
          content:
            text/html:
              schema:
                type: string
              
components:
  schemas:
    Annotations:
      type: object
      properties:
        success:
          type: boolean
          example: true
        total:
          type: integer
          example: 301
        annotations:
          type: array
          items:
            $ref: '#/components/schemas/Annotation'
    Annotation:
      type: object
      properties:
        id:
          type: string
          example: annotation-2
        title:
          type: string
          example: Annotation Title
        categories:
          type: string
          example: Bogensetzung
        priority:
          type: string
          format: integer
          example: "1"
        pos:
          type: string
          format: integer
          example: "2"
        sigla:
          type: string
          example: "A, K/sv, ED‚ÇÅ"
    Edition:
      type: object
      properties:
        id:
          type: string
          example: edirom_edition_example
        doc:
          type: string
          example: xmldb:exist:///db/apps/edirom/edition-example/content/ediromEditions/edirom_edition_example.xml
        name:
          type: string
          example: Edirom Edition Example
        additional_css_path:
          type: string
          example: ""
        languages:
          type: string
          example: de
    Preferences:
      type: object
      properties:
        application_language:
          type: string
          example: de
        annotation_layout:
          type: string
          example: EdiromOnline.view.window.annotationLayouts.AnnotationLayout1
        image_prefix:
          type: string
          example: https://digilib.freischuetz-digital.de/Scaler/
    View:
      type: object
      properties:
        type:
          type: string
          enum:
          - headerView
          - textView
          - xmlView
        defaultView:
          type: boolean
          example: true
        label:
          type: string
          example: XML Text
        uri:
          type: string
          example: xmldb:exist:///db/apps/contents/edition/freidi-work-overview.xml
    LinkTarget:
      type: object
      properties:
        type:
          type: string
          example: work
        title:
          type: string
          example: "Der Freisch√ºtz, romantische Oper in drei Aufz√ºgen"
        doc:
          type: string
          example: xmldb:exist:///db/apps/contents/edition/freidi-work.xml
        views:
          type: array
          items:
            $ref: '#/components/schemas/View'
        internalId:
          type: string
          example: ""
        term:
          type: string
          example: ""
        path:
          type: string
          example: ""
        internalIdType:
          type: string
          example: unknown
    Works:
      type: object
      properties:
        id:
          type: string
          example: ""
        doc:
          type: string
          example: ""
        title:
          type: string
          example: ""
    plistItem:
      type: object
      properties:
        id:
          type: string
          example: annotation__bar-2005
        type:
          type: string
          example: measure
        ulx:
          type: integer
          example: 100
        uly:
          type: integer
          example: 200
        lrx:
          type: integer
          example: 300
        lry:
          type: integer
          example: 400
    AnnotationItem:
      type: object
      properties:
        id:
          type: string
          example: annotation-2
        plist:
          type: array
          items:
            $ref: '#/components/schemas/plistItem'
        svgList:
          type: array
          items:
            type: string
            example: svg-1.svg
        fn:
          type: string
          example: loadLink("xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml#annotation-2")
        uri:
          type: string
          example: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-4-MEI.xml#annotation-2
        priority:
          type: string
          example: ediromAnnotPrio1
        categories:
          type: string
          example: wega.annotation.category.bogensetzung
    AnnotationInfos:
      type: object
      properties:
        categories:
          type: array
          items:
            $ref: '#/components/schemas/Category'
        priorities:
          type: array
          items:
            $ref: '#/components/schemas/Priority'
        count:
          type: integer
          example: 226
    AnnotationPreviews:
      type: object
      properties:
        success:
          type: boolean
          example: true
        participants:
          type: array
          items:
            $ref: '#/components/schemas/Participant'
    Participant:
      type: object
      properties:
        type:
          type: string
          example: measure
        label:
          type: string
          example: Takte 5 bis 7
        mdiv:
          type: string
          example: ""
        part:
          type: string
          example: ""
        page:
          type: string
          example: "2"
        source:
          type: string
          example: Autograph A
        siglum:
          type: string
          example: A
        digilibBaseParams:
          type: string
          example: https://content.staatsbibliothek-berlin.de/dc/69007087X-0002
        digilibSizeParams:
          type: string
          example: '&amp;wx=0.40759493670886077&amp;wy=0.07724493080141616&amp;ww=0.16050632911392404&amp;wh=0.30254264563887995&amp;mo=fit'
        hiddenData:
          $ref: '#/components/schemas/HiddenData'
        content:
          type: string
          example: ""
        linkUri:
          type: string
          example: xmldb:exist:///db/apps/weber-klarinettenquintett-eol-emeritus/sources/source-1.xml#bar-2005?tstamp2=2m+0
    HiddenData:
      type: object
      properties:
        width:
          type: integer
          example: 634
        height:
          type: integer
          example: 940
        x:
          type: integer
          example: 1610
        "y":
          type: integer
          example: 240
        origH:
          type: integer
          example: 3107
        origW:
          type: integer
          example: 3950
    Category:
      type: object
      properties:
        id:
          type: string
          example: wega.annotation.category.bogensetzung
        name:
          type: string
          example: Bogensetzung
    Priority:
      type: object
      properties:
        id:
          type: string
          example: ediromAnnotPrio1
        name:
          type: string
          example: "1"
    Movement:
      type: object
      properties:
        id:
          type: string
          example: movement-1
        name:
          type: string
          example: Allegro
        parts:
          type: array
          items:
            $ref: '#/components/schemas/Part'
    Part:
      type: object
      properties:
        id:
          type: string
          example: ""
        name:
          type: string
          example: Violine
    Page:
      type: object
      properties:
        id:
          type: string
          example: facsimile-2001001
        path:
          type: string
          example: https://content.staatsbibliothek-berlin.de/dc/69007087X-0001
        name:
          type: string
          example: "1"
        width:
          type: string
          example: "3950"
        height:
          type: string
          example: "3107"
    Chapters:
      type: object
      properties:
        id:
          type: string
          example: "d1e372"
        name:
          type: string
          example: "No. 0"
        pageId:
          type: string
          example: "surface_0000005"
      Chapters:
        type: array
        items:
          $ref: '#/components/schemas/Chapters'
    Concordance:
      type: object
      properties:
        name:
          type: string
          example: Taktkonkordanz nach neuer Struktur
        groups:
          type: object
          properties:
            label:
              type: string
              example: Satz
            groups:
              type: array
              items:
                type: object
                properties:
                  name:
                    type: string
                    example: Overtura.
                  connections:
                    type: object
                    properties:
                      label:
                        type: string
                        example: Takt
                      connections:
                        type: array
                        items:
                          type: object
                          properties:
                            name:
                              type: string
                              example: "1"
                            plist:
                              type: string
                              example: xmldb:exist:///db/apps/contents/musicSources/freidi-musicSource_A.xml#A_mov0_measure1
            connections:
              type: array
              items:
                type: object
                properties: {}
  parameters:
    editionParam:
      name: edition
      in: query
      description: Identifier of the edition
      schema:
        type: string
    uriParam:
      name: uri
      in: query
      description: URI
      schema:
        type: string
    langParam:
      name: lang
      in: query
      description: Language
      schema:
        type: string
        default: en
        enum:
        - de
        - en
    idParam:
      name: id
      in: query
      description: ID
      schema:
        type: string
    editionIdParam:
      name: editionId
      in: query
      description: Edition ID
      schema:
        type: string
    pageIdParam:
      name: pageId
      in: query
      description: Page ID
      schema:
        type: string
    annotIdParam:
      name: annotId
      in: query
      description: Annotation ID
      schema:
        type: string
    measureIdParam:
      name: measureId
      in: query
      description: Measure ID
      schema:
        type: string
    movementIdParam:
      name: movementId
      in: query
      description: Movement ID
      schema:
        type: string
    overlayIdParam:
      name: overlayId
      in: query
      description: Overlay ID
      schema:
        type: string
    workIdParam:
      name: workId
      in: query
      description: Work ID
      schema:
        type: string
    selectionIdParam:
      name: selectionId
      in: query
      description: Selection ID
      schema:
        type: string
    zoneIdParam:
      name: zoneId
      in: query
      description: Zone ID
      schema:
        type: string
    internalIdParam:
      name: internalId
      in: query
      description: Internal ID
      schema:
        type: string
    idPrefixParam:
      name: idPrefix
      in: query
      description: ID prefix
      schema:
        type: string
    targetParam:
      name: target
      in: query
      description: Target
      schema:
        type: string
    mdivParam:
      name: mdiv
      in: query
      description: Measure div
      schema:
        type: string
    measureParam:
      name: measure
      in: query
      description: Measure
      schema:
        type: string
    measureCountParam:
      name: measureCount
      in: query
      description: Measure Count
      schema:
        type: string
        default: "1"
        
    modeParam:
      name: mode
      in: query
      description: Mode
      schema:
        type: string
    typeParam:
      name: type
      in: query
      description: Type
      schema:
        type: string
        enum:
        - work
        - source
        - recording
        - text
    termParam:
      name: term
      in: query
      description: Term
      schema:
        type: string
    pathParam:
      name: path
      in: query
      description: Path
      schema:
        type: string
    pageParam:
      name: page
      in: query
      description: Page
      schema:
        type: string
    subtreeRootParam:
      name: subtreeRoot
      in: query
      description: Subtree root
      schema:
        type: string
